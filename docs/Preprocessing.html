---

title: Data preprocessig


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/Preprocessing.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/Preprocessing.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="This-notebook-provides-functions-to-format-input-data-for-sequence-plotting">This notebook provides functions to format input data for sequence plotting<a class="anchor-link" href="#This-notebook-provides-functions-to-format-input-data-for-sequence-plotting"> </a></h2><p>The formatted input data is returned as pandas dataframe containing following columns:</p>
<ul>
<li>unique_protein_id: a single uniprot accession</li>
<li>modified_sequence: modified peptide sequence</li>
<li>naked_sequence: naked peptide sequence    </li>
<li>all_protein_ids: all UniProt IDs the peptide map to separated by ';'</li>
<li>start: peptide start position on protein sequence</li>
<li>end: peptide end position on protein sequence</li>
<li>PTMsites: list with PTM positions</li>
<li>PTMtypes: list with PTM types</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Generate-input-data-for-testing">Generate input data for testing<a class="anchor-link" href="#Generate-input-data-for-testing"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>@ToDO: Maybe write .fasta import function to remove dependency for pyteomics</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pyteomics</span> <span class="kn">import</span> <span class="n">fasta</span>
<span class="n">test_fasta</span> <span class="o">=</span> <span class="n">fasta</span><span class="o">.</span><span class="n">IndexedUniProt</span><span class="p">(</span><span class="s2">&quot;../testdata/test.fasta&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Expand-shared-protein-ids-to-unique">Expand shared protein ids to unique<a class="anchor-link" href="#Expand-shared-protein-ids-to-unique"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="expand_protein_ids" class="doc_header"><code>expand_protein_ids</code><a href="https://github.com/ibludau/alphamap/tree/master/alphamap/preprocessing.py#L8" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>expand_protein_ids</code>(<strong><code>df</code></strong>)</p>
</blockquote>
<p>Function split all_protein_ids into separate rows</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Annotate-peptides-with-start-and-end-position">Annotate peptides with start and end position<a class="anchor-link" href="#Annotate-peptides-with-start-and-end-position"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="pep_position_helper" class="doc_header"><code>pep_position_helper</code><a href="https://github.com/ibludau/alphamap/tree/master/alphamap/preprocessing.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>pep_position_helper</code>(<strong><code>seq</code></strong>, <strong><code>prot</code></strong>, <strong><code>fasta</code></strong>, <strong><code>verbose</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_peptide_position" class="doc_header"><code>get_peptide_position</code><a href="https://github.com/ibludau/alphamap/tree/master/alphamap/preprocessing.py#L45" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_peptide_position</code>(<strong><code>df</code></strong>, <strong><code>fasta</code></strong>, <strong><code>verbose</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Function to get start and end position of each peptide in the given protein</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Grep-all-modifications">Grep all modifications<a class="anchor-link" href="#Grep-all-modifications"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_ptm_sites" class="doc_header"><code>get_ptm_sites</code><a href="https://github.com/ibludau/alphamap/tree/master/alphamap/preprocessing.py#L67" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_ptm_sites</code>(<strong><code>peptide</code></strong>, <strong><code>modification_reg</code></strong>)</p>
</blockquote>
<p>Function to get sequence positions of all PTMs of a peptide in the given protein</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_modifications" class="doc_header"><code>get_modifications</code><a href="https://github.com/ibludau/alphamap/tree/master/alphamap/preprocessing.py#L91" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_modifications</code>(<strong><code>df</code></strong>, <strong><code>mod_reg</code></strong>)</p>
</blockquote>
<p>Function to get sequence positions and modification types of all PTMs of a peptide in the given protein</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Preprocessing-wrapper">Preprocessing wrapper<a class="anchor-link" href="#Preprocessing-wrapper"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="format_input_data" class="doc_header"><code>format_input_data</code><a href="https://github.com/ibludau/alphamap/tree/master/alphamap/preprocessing.py#L103" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>format_input_data</code>(<strong><code>df</code></strong>, <strong><code>fasta</code></strong>, <strong><code>modification_exp</code></strong>, <strong><code>verbose</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Function to format input data and to annotate sequence start and end positions plus PTM sites</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Export-notebook-to-script">Export notebook to script<a class="anchor-link" href="#Export-notebook-to-script"> </a></h2>
</div>
</div>
</div>
</div>
 

